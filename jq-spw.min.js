(function(c){c.fn.spwWidgetize=function(h,a){a=c.extend(!0,{auto_measurement_key:"emailsSent",manual_measurement_key:"manualMeasurement",target_key:"target",measurement_text_key:"measurementText",debug:!1,min_arrow:3,template_html:" <div id='widget-wrapper'> <h4><span class='widget-header-total'><%= total %></span> <span class='header-text'><%= measurement_text %></span></h4> <span id='widget-progress-arrow' style='left: <%= progress_arrow_position %>px;'></span> <span id='widget-progress-value' style='width: <%= progress_width %>px;'></span> <div id='widget-progress-meter'> </div> <h5><span class='widget-footer-base'>0</span><span class='widget-footer-target'><%= target %></span></h5> </div> "},
a);a.url=h;$container=this;a.debug&&c("head").append('<style type="text/css"> #progress-total{ width: 100%; height: 50px; background: #AAA;} #progress-bar{ width: 0; height: 50px; background: #CCC;} #widget-wrapper { background: url("images/progress-bg.png") no-repeat scroll left top transparent; display: block; height: 130px; position: relative; top: 26px; width: 200px; color: #FFF; font-family: helvetica, ariel, sans-serif; } #widget-progress-arrow { background: url("images/progress-arrow.png") no-repeat scroll left top transparent; display: block; height: 11px; position: absolute; top: 75px; width: 21px; } #widget-progress-value { background: none repeat scroll 0 0 #EC008C; display: block; height: 10px; left: 0; position: absolute; top: 91px; z-index: 0; } #widget-progress-meter { background: url("images/progress-meter.png") no-repeat scroll left top transparent; height: 16px; left: 0; position: absolute; top: 89px; width: 200px; } #widget-wrapper h4 { padding: 10px; } #widget-wrapper h4 span.widget-header-total { font-size: 30px; text-align: center; display: block; clear: right;} #widget-wrapper h4 span.header-text { text-align: center; display: block;} #widget-wrapper h5 { position: relative; top: 10px; color: #000; font-size: 20px; } #widget-wrapper h5 span.widget-footer-target { float: right; } </style> ');
c.ajax({url:a.url,dataType:"jsonp",success:function(e){var b={};c(e.feed.entry).each(function(e,d){if(d.title.$t==a.auto_measurement_key||d.title.$t==a.manual_measurement_key||d.title.$t==a.target_key||d.title.$t==a.measurement_text_key)b[d.title.$t]=d.content.$t.replace("value: ","");a.debug&&c("#"+d.title.$t).text(d.content.$t.replace("value: ",""))});b.total=parseInt(b[a.auto_measurement_key])+parseInt(b[a.manual_measurement_key]);b.progress=parseInt(b.total)/(parseInt(b[a.target_key])/100);var e=
$container.width()/100*b.progress,f=e>a.min_arrow+10?parseInt(e-11):3;template_html=i(a.template_html,{total:b.total,measurement_text:b[a.measurement_text_key],progress_arrow_position:f,progress_width:e,target:b[a.target_key]});$container.html(template_html)}});var f=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},i=function(a,b){var c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%-([\s\S]+?)%>/g,
function(a,b){return"',_.escape("+f(b)+"),'"}).replace(/<%=([\s\S]+?)%>/g,function(a,b){return"',"+f(b)+",'"}).replace(/<%([\s\S]+?)%>/g,function(a,b){return"');"+f(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",g=new Function("obj","_",c);return b?g(b,function(a){return new wrapper(a)}):function(a){return g.call(this,a,function(a){return new wrapper(a)})}}}})(jQuery);